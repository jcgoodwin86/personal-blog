---
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPostCard from "../components/BlogPostCard.astro";
import { getPosts } from "../scripts/fetcher";

const data = await getPosts();
const pageTitle = data.publication.title;
const postsArr = data.publication.posts.edges;
---

<BaseLayout pageTitle={pageTitle}>
  {postsArr.map((post) => <BlogPostCard post={post} />)}
</BaseLayout>

<script>
  import { getPosts } from "../scripts/fetcher";

  console.log(await getPosts());
</script>
